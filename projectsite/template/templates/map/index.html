{% extends "base.html" %}
{% block title %}Map View | PeerHelp{% endblock %}
{% block body_class %}map-page{% endblock %}
{% block content %}
<section class="page-header mb-4">
  <div>
    <h1 class="h2 text-gray-900 mb-2">In-Person Requests</h1>
    <p class="text-muted-soft mb-0">View students who need help face-to-face around campus.</p>
  </div>
</section>



<section class="mentora-card map-card mb-4">
  <div class="map-canvas">
    <div
      id="inPersonMap"
      class="map-stage"
      data-has-requests="{% if in_person_requests %}true{% else %}false{% endif %}"
      data-google-maps-key="{{ google_maps_api_key|default:'' }}"
    ></div>
    {% if not in_person_requests %}
      <div class="map-empty-state">
        <p class="mb-0 text-muted-soft">No on-campus meeting spots yet. As soon as students pick a location, the pins will appear here.</p>
      </div>
    {% endif %}
  </div>
</section>

<section class="mentora-card info-banner">
  <div class="card-body d-flex gap-3">
    <div class="info-icon">
      <i data-lucide="map-pin"></i>
    </div>
    <div>
      <h3 class="h6 text-gray-900 mb-2">In-Person Support Rules</h3>
      <ul class="list-unstyled text-muted-soft small mb-0 d-flex flex-column gap-1">
        <li>Only problems flagged as <strong>In Person</strong> appear on this map.</li>
        <li>Each marker represents a student request, not a mentor.</li>
        <li>Coordinate directly in chat before meeting at a public campus spot.</li>
        <li>Once solved, leave a review so it shows up in your portfolio.</li>
      </ul>
    </div>
  </div>
</section>
{{ in_person_requests|json_script:"inPersonRequestsData" }}
{% endblock %}

{% block extra_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/map-in-person.css' %}">
{% endblock %}

{% block extra_js %}
  {{ block.super }}
  <script src="{% static 'js/map-in-person.js' %}" defer></script>
{% endblock %}
