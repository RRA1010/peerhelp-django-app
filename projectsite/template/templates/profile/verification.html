{% extends "base.html" %}
{% block title %}ID Verification | PeerHelp{% endblock %}
{% block body_class %}verification-page{% endblock %}
{% block content %}
<section class="page-header mb-4 d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3">
  <div>
    <h1 class="h2 text-gray-900 mb-2">Identity Verification</h1>
    <p class="text-muted-soft mb-0">Upload a valid student ID or government document. We only store it securely for review.</p>
  </div>
  <div class="badge-soft teal text-capitalize">Current Status: {{ id_status|default:"pending" }}</div>
</section>

{% if id_status == "verified" %}
<section class="mentora-card mb-4">
  <div class="card-body p-4 p-lg-5 text-center">
    <div class="mb-4">
      <i data-lucide="badge-check" class="text-teal-600" style="width: 64px; height: 64px;"></i>
    </div>
    <h2 class="h3 text-gray-900 mb-3">Congratulations!</h2>
    <p class="text-muted-soft mb-4">Your identity has been verified. You can now help other students by accepting and solving problems.</p>
    <a class="btn btn-orange d-inline-flex align-items-center gap-2" href="{% url 'dashboard' %}">
      <i data-lucide="home"></i>
      Back to Dashboard
    </a>
  </div>
</section>
{% else %}
<section class="mentora-card mb-4">
  <div class="card-body p-4 p-lg-5">
    <form method="post" enctype="multipart/form-data" class="d-flex flex-column gap-4">
      {% csrf_token %}
      <div>
        <label class="form-label small text-muted-soft">Upload Document</label>
        {{ id_form.id_document }}
        {{ id_form.id_document.errors }}
        {% if id_form.fields.id_document.help_text %}
          <p class="small text-muted-soft mt-2">{{ id_form.fields.id_document.help_text }}</p>
        {% endif %}
      </div>
      <div class="alert alert-info">
        <strong>Heads up!</strong> Once submitted, your document will be reviewed manually. Status will update to <em>verified</em> when approved.
      </div>
      <div class="d-flex flex-column flex-md-row gap-3">
        <a class="btn btn-orange-outline w-100 w-md-auto" href="{% url 'dashboard' %}">Back to Dashboard</a>
        <button type="submit" class="btn btn-orange w-100 w-md-auto d-inline-flex align-items-center justify-content-center gap-2">
          <i data-lucide="upload"></i>
          Submit for Review
        </button>
      </div>
    </form>
  </div>
</section>

<section class="mentora-card info-banner">
  <div class="card-body d-flex gap-3">
    <div class="info-icon">
      <i data-lucide="shield"></i>
    </div>
    <div>
      <h3 class="h6 text-gray-900 mb-2">Verification Checklist</h3>
      <ul class="list-unstyled text-muted-soft small mb-0 d-flex flex-column gap-1">
        <li>Ensure your name matches your PeerHelp profile.</li>
        <li>Photos should be clear with all corners visible.</li>
        <li>Accepted formats: JPG, PNG, or PDF (max 5MB).</li>
        <li>We do not share your document with anyone.</li>
      </ul>
    </div>
  </div>
</section>
{% endif %}
{% endblock %}
